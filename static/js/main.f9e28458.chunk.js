(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(66),c=a.n(o),i=(a(76),a(77),a(78),a(8)),s=a(4),u=a.n(s),l=a(10),p=a(67),m=a.n(p),d=a(68),A=a.n(d),E=a(33),_=a.n(E),b=a(24),f=a.n(b),P={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).authDomain,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).databaseURL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).projectId,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).messagingSenderId},v={};Object.keys(P).map(function(e){v[e]=Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam-admin",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"})["REACT_APP_".concat(e)]}),f.a.apps.length||f.a.initializeApp(v);var R=f.a,h=a(14),C=a.n(h);a(145);C.a.locale("ja");var g=function(){var e=Object(l.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?C()(t).format("YYYY-MM-DD"):C()().format("YYYY-MM-DD"),console.log("grabbing videos from: ",a),e.next=4,R.firestore().collection("videoURL").doc(a).collection("urls").orderBy("url").get().then(function(){var e=Object(l.a)(u.a.mark(function e(t){var a,r,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=[],e.next=4,t.forEach(function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data().url,r.push(n.split("/").slice(-1)),a.push(R.storage().ref(n).getDownloadURL());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.next=6,Promise.all(a);case 6:return n=e.sent,e.abrupt("return",n.map(function(e,t){return{name:r[t],src:e}}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.firestore().collection("appState").doc("commands").get().then(function(e){return e.data()}).catch(function(e){return console.log("REMOTE DB STATE READ ERROR: ",e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new m.a,console.log(t[0]),r=[],t.map(function(){var e=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push(_()({method:"get",url:t.src,responseType:"blob"}).then(function(e){var r=new Blob([e.data],{type:"video/mp4"});a.file(t.name,r)}).catch(function(e){throw console.log("axios error: ",e),new Error("download failed. check console.")}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(r);case 6:a.generateAsync({type:"blob"}).then(function(e){A.a.saveAs(e,"videos.zip")});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.date,a=void 0===t?"2019-05-08":t,o=Object(r.useState)(!1),c=Object(i.a)(o,2),s=c[0],u=c[1],l=Object(r.useState)([]),p=Object(i.a)(l,2),m=p[0],d=p[1],A=Object(r.useState)(!1),E=Object(i.a)(A,2),_=E[0],b=E[1],f=Object(r.useState)(""),P=Object(i.a)(f,2),v=P[0],R=P[1];return Object(r.useEffect)(function(){b(!0),R(""),g(a).then(function(e){e&&d(e),b(!1)}).catch(function(e){R(JSON.stringify(e)),b(!1)})},[a]),n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"current list of videos on ",a,": ",m.length," ",n.a.createElement("button",{onClick:function(){return D(m)}},"DOWNLOAD ALL"),n.a.createElement("button",{onClick:function(){return u(!s)}},"preview video")),s&&n.a.createElement("h4",{style:{color:"red"}},"WARNING: video previews count towards download quota of 1GB/day"),n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},_&&"Loading...",v,m.map(function(e,t){return n.a.createElement("div",{key:e.src,style:{margin:5}},s?n.a.createElement("video",{height:200,controls:!0,playsInline:!0},n.a.createElement("source",{src:e.src,type:"video/webm"})):n.a.createElement("a",{href:e.src},e.name),n.a.createElement("br",null),n.a.createElement("small",null,e.name))})))},w=a(34),I=a.n(w),O=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),a=t[0],o=t[1];Object(r.useEffect)(function(){!function(){var e=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var c=Object.keys(a).map(function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e),n.a.createElement("td",null,"".concat(a[e])))});return n.a.createElement("div",{className:I.a.recorderMonitorContainer},n.a.createElement("table",{className:I.a.listTable},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h3",null,"video recorder settings")))),n.a.createElement("tbody",null,c)))},y=a(70),N=a.n(y),S=function(){var e=Object(r.useState)("2019-05-10"),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)("2019-05-10"),s=Object(i.a)(c,2),u=s[0],l=s[1];return n.a.createElement("div",{className:N.a.dashboardContainer},n.a.createElement("h1",null,"ricecam admin"),n.a.createElement("form",{onSubmit:function(e){l(a),e.preventDefault()}},n.a.createElement("input",{onChange:function(e){return o(e.target.value)},value:a,placeholder:"2019-05-08"}),n.a.createElement("button",{type:"submit"},"get videos")),n.a.createElement(T,{date:u}),n.a.createElement(O,null))};var k=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("ol",null,n.a.createElement("li",null,"DONE pull state from database"),n.a.createElement("li",null,"DONE see current recorder state"),n.a.createElement("li",null,"DONE view all videos on a certain day (and their predictions)"),n.a.createElement("li",null,"LATER allow admin to mark the ones to keep and delete the rest"),n.a.createElement("li",null,"allow download in bulk"),n.a.createElement("br",null),n.a.createElement("li",null,"larger video (maybe 1080p square"))),n.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},34:function(e,t,a){e.exports={listContainer:"RecorderMonitor_listContainer__14aDU",listTable:"RecorderMonitor_listTable__3CBxQ"}},70:function(e,t,a){},71:function(e,t,a){e.exports=a(146)},76:function(e,t,a){},77:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},78:function(e,t,a){},84:function(e,t){},86:function(e,t){}},[[71,1,2]]]);
//# sourceMappingURL=main.f9e28458.chunk.js.map